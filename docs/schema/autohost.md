<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# Autohost

## Modes

For now, we're only caring about the slaved mode, as it's a lot more work to implement dedicated mode and might not be necessary until we get a lot more players. Dedicated mode might not be ever realized.

All commands that are currenty defined are for the slaved mode of operation, there is nothing in place for dedicated one.

### Dedicated

Communication from players goes directly to the autohost.

#### Pros

-   Lightens the load on the Tachyon server and makes scaling easier
-   Improved latency for players as messages don't need to be sent through a middleman server
-   Players in existing battles can keep playing games there even if the Tachyon server goes down

#### Cons

-   Tachyon server becomes unaware of activity taking place in battles directly, meaning any additional desired functionality such as telemetry or message logging would need to be implemented separately

### Slaved

The Tachyon server acts as a middleman to broker messages between players and the autohost.

#### Pros

-   The Tachyon server effectively has full control over the autohost, making it possible to interject communications which could be useful for various reasons
-   The autohost's implementation has the potential to be much simpler, as the Tachyon server could handle all the pre-game communications and only interface with the autohost when launching the game and putting it in touch with the players

#### Cons

-   The Tachyon server has to do more heavy lifting for custom games, where lots of comms can take place before the game begins
-   Increased Tachyon server load/bandwidth
-   If the Tachyon server goes down, all the existing lobbies (pre-game battles) will also go down

## Matchmaking

Autohosts used for matchmaking should use the slaved mode as no pregame communication between players and the autohost is required. The Tachyon server can dictate the battle's settings, start new game on autohost with those parameters and send connetion details to players.

## Custom Battles

Autohosts used for custom games should use the dedicated mode as lots of pregame communication can take place.

---
- [addPlayer](#addplayer)
- [installEngine](#installengine)
- [kickPlayer](#kickplayer)
- [kill](#kill)
- [mutePlayer](#muteplayer)
- [sendCommand](#sendcommand)
- [sendMessage](#sendmessage)
- [specPlayers](#specplayers)
- [start](#start)
- [status](#status)
- [subscribeUpdates](#subscribeupdates)
- [update](#update)
---

## AddPlayer

Request to add a new player to the battle.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostAddPlayerRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/addPlayer" },
        "data": {
            "title": "AutohostAddPlayerRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "userId": { "$ref": "#/definitions/userId" },
                "name": { "type": "string" },
                "password": { "type": "string" }
            },
            "required": ["battleId", "userId", "name", "password"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "do labore velit",
    "commandId": "autohost/addPlayer",
    "data": {
        "battleId": "66b4294f-6a36-98b4-80ab-ba20c5a9b023",
        "userId": "351",
        "name": "ad",
        "password": "in dolore qui reprehenderit occaecat"
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;

export interface AutohostAddPlayerRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/addPlayer";
    data: AutohostAddPlayerRequestData;
}
export interface AutohostAddPlayerRequestData {
    battleId: string;
    userId: UserId;
    name: string;
    password: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostAddPlayerResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostAddPlayerOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/addPlayer" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostAddPlayerFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/addPlayer" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "eiusmod cupidatat id in exercitation",
    "commandId": "autohost/addPlayer",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostAddPlayerOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/addPlayer";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## InstallEngine

Ask the autohost to install specified engine version.

Return success instantly and autohost triggers the installation of the engine in background. It's fine to call this method repeatedly and autohost must deduplicate requests internally. When new engine is installed autohost send a `status` event with the new available engine versions.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostInstallEngineRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/installEngine" },
        "data": {
            "title": "AutohostInstallEngineRequestData",
            "type": "object",
            "properties": {
                "version": {
                    "description": "Version of the engine to install",
                    "type": "string"
                }
            },
            "required": ["version"],
            "examples": [{ "version": "2025.01.5" }]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "sunt anim elit fugiat esse",
    "commandId": "autohost/installEngine",
    "data": {
        "version": "2025.01.5"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostInstallEngineRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/installEngine";
    data: AutohostInstallEngineRequestData;
}
export interface AutohostInstallEngineRequestData {
    version: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostInstallEngineResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostInstallEngineOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/installEngine" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostInstallEngineFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/installEngine" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "nostrud sit nisi voluptate",
    "commandId": "autohost/installEngine",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostInstallEngineOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/installEngine";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## KickPlayer

Kick a player from a battle.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostKickPlayerRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/kickPlayer" },
        "data": {
            "title": "AutohostKickPlayerRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "userId": { "$ref": "#/definitions/userId" }
            },
            "required": ["battleId", "userId"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Ut pariatur",
    "commandId": "autohost/kickPlayer",
    "data": {
        "battleId": "853c948a-5bbb-4c62-508a-3dfd7d9e6547",
        "userId": "351"
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;

export interface AutohostKickPlayerRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/kickPlayer";
    data: AutohostKickPlayerRequestData;
}
export interface AutohostKickPlayerRequestData {
    battleId: string;
    userId: UserId;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostKickPlayerResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostKickPlayerOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/kickPlayer" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostKickPlayerFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/kickPlayer" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "fugiat ullamco occaecat Duis incididunt",
    "commandId": "autohost/kickPlayer",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostKickPlayerOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/kickPlayer";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Kill

Request to kill a battle.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostKillRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/kill" },
        "data": {
            "title": "AutohostKillRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" }
            },
            "required": ["battleId"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "anim minim pariatur",
    "commandId": "autohost/kill",
    "data": {
        "battleId": "68723178-2619-268c-de89-096ee25b0864"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostKillRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/kill";
    data: AutohostKillRequestData;
}
export interface AutohostKillRequestData {
    battleId: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostKillResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostKillOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/kill" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostKillFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/kill" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "sunt ad aute qui",
    "commandId": "autohost/kill",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostKillOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/kill";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## MutePlayer

Mute a player in a battle.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostMutePlayerRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/mutePlayer" },
        "data": {
            "title": "AutohostMutePlayerRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "userId": { "$ref": "#/definitions/userId" },
                "chat": { "type": "boolean" },
                "draw": { "type": "boolean" }
            },
            "required": ["battleId", "userId", "chat", "draw"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "anim veniam esse",
    "commandId": "autohost/mutePlayer",
    "data": {
        "battleId": "e9590648-b5c8-38f2-f397-9c90e64e46d2",
        "userId": "351",
        "chat": true,
        "draw": false
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;

export interface AutohostMutePlayerRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/mutePlayer";
    data: AutohostMutePlayerRequestData;
}
export interface AutohostMutePlayerRequestData {
    battleId: string;
    userId: UserId;
    chat: boolean;
    draw: boolean;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostMutePlayerResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostMutePlayerOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/mutePlayer" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostMutePlayerFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/mutePlayer" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "velit eu enim fugiat incididunt",
    "commandId": "autohost/mutePlayer",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostMutePlayerOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/mutePlayer";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## SendCommand

Send a custom command for the autohost to execute.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSendCommandRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/sendCommand" },
        "data": {
            "title": "AutohostSendCommandRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "command": { "type": "string" },
                "arguments": { "type": "array", "items": { "type": "string" } }
            },
            "required": ["battleId", "command"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "laborum",
    "commandId": "autohost/sendCommand",
    "data": {
        "battleId": "4052d53f-ba69-5da2-1e06-4b945a61e4e4",
        "command": "in mollit",
        "arguments": [
            "tempor amet proident"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostSendCommandRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/sendCommand";
    data: AutohostSendCommandRequestData;
}
export interface AutohostSendCommandRequestData {
    battleId: string;
    command: string;
    arguments?: string[];
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSendCommandResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostSendCommandOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/sendCommand" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostSendCommandFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/sendCommand" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "est dolor",
    "commandId": "autohost/sendCommand",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostSendCommandOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/sendCommand";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## SendMessage

Send a message for the autohost to display to players.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSendMessageRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/sendMessage" },
        "data": {
            "title": "AutohostSendMessageRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "message": { "type": "string", "maxLength": 127 }
            },
            "required": ["battleId", "message"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "reprehenderit sed",
    "commandId": "autohost/sendMessage",
    "data": {
        "battleId": "4a26eb99-158d-cea3-c275-f8d512dfbc5d",
        "message": "occaecat dolore"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostSendMessageRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/sendMessage";
    data: AutohostSendMessageRequestData;
}
export interface AutohostSendMessageRequestData {
    battleId: string;
    message: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSendMessageResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostSendMessageOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/sendMessage" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostSendMessageFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/sendMessage" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "aute",
    "commandId": "autohost/sendMessage",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostSendMessageOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/sendMessage";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## SpecPlayers

Force players to become spectators in a battle.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSpecPlayersRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/specPlayers" },
        "data": {
            "title": "AutohostSpecPlayersRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "userIds": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/userId" }
                }
            },
            "required": ["battleId", "userIds"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "sed",
    "commandId": "autohost/specPlayers",
    "data": {
        "battleId": "99a1a151-6db0-fc47-7473-2a67cd624a94",
        "userIds": [
            "351",
            "351",
            "351",
            "351"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UserId = string;

export interface AutohostSpecPlayersRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/specPlayers";
    data: AutohostSpecPlayersRequestData;
}
export interface AutohostSpecPlayersRequestData {
    battleId: string;
    userIds: UserId[];
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSpecPlayersResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostSpecPlayersOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/specPlayers" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostSpecPlayersFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/specPlayers" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "Lorem labore enim deserunt",
    "commandId": "autohost/specPlayers",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostSpecPlayersOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/specPlayers";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Start

Tell the autohost client to launch the game server (spring-dedicated.exe or spring-headless.exe) with the given script data.

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostStartRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/start" },
        "data": {
            "title": "AutohostStartRequestData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "engineVersion": {
                    "type": "string",
                    "pattern": "^[0-9a-zA-Z .+-]+$"
                },
                "gameName": { "type": "string" },
                "mapName": { "type": "string" },
                "gameArchiveHash": {
                    "type": "string",
                    "pattern": "^[a-fA-F0-9]{128}$"
                },
                "mapArchiveHash": {
                    "type": "string",
                    "pattern": "^[a-fA-F0-9]{128}$"
                },
                "startDelay": { "type": "integer" },
                "startPosType": { "$ref": "#/definitions/startPosType" },
                "allyTeams": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/allyTeam" },
                    "minItems": 1
                },
                "spectators": {
                    "type": "array",
                    "items": { "$ref": "#/definitions/player" }
                },
                "mapOptions": {
                    "type": "object",
                    "patternProperties": { "^(.*)$": { "type": "string" } }
                },
                "gameOptions": {
                    "type": "object",
                    "patternProperties": { "^(.*)$": { "type": "string" } }
                },
                "restrictions": {
                    "description": "Mapping from unitDefId to the maximum number of units of that type that can be built.",
                    "type": "object",
                    "patternProperties": {
                        "^(.*)$": { "type": "integer", "minimum": 0 }
                    }
                },
                "luamsgRegexp": {
                    "description": "When set, battle will generate updates for luamsgs matching this regexp. No updates will be generated if this is not set.",
                    "type": "string",
                    "format": "regex"
                }
            },
            "required": [
                "battleId",
                "engineVersion",
                "gameName",
                "mapName",
                "startPosType",
                "allyTeams"
            ]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "sint ex non",
    "commandId": "autohost/start",
    "data": {
        "battleId": "4c9e363d-e213-f8ec-b003-30375e86dcd7",
        "engineVersion": "C730C",
        "gameName": "cupidatat esse veniam",
        "mapName": "aliquip est in",
        "startDelay": -36461103,
        "startPosType": "ingame",
        "allyTeams": [
            {
                "teams": [
                    {
                        "players": [
                            {
                                "userId": "351",
                                "name": "reprehenderit minim",
                                "password": "dolore irure et esse",
                                "customProperties": {
                                    "4": "reprehenderit fugiat",
                                    "n": "voluptate",
                                    "Z": "cupidatat",
                                    "N": "elit Duis Ut officia ut",
                                    "t": "Lorem aliquip",
                                    "U": "sit eiusmod ullamco"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "magna irure",
                                "password": "veniam dolore",
                                "rank": -67761314,
                                "countryCode": "ut in do culpa nulla",
                                "customProperties": {
                                    "Y": "laborum Excepteur Lorem"
                                }
                            }
                        ],
                        "bots": [],
                        "advantage": 89673966.06609696,
                        "incomeMultiplier": 58906030.65490723,
                        "faction": "velit voluptate aliquip cillum Ut",
                        "color": {
                            "r": 0.6673920154571533,
                            "g": 0.538798451423645,
                            "b": 0.2185434103012085
                        },
                        "startPos": {
                            "x": 43230844,
                            "y": 2703130
                        },
                        "customProperties": {
                            "H": "esse",
                            "s": "Ut occaecat"
                        }
                    },
                    {
                        "eiusmod_8": -38074327,
                        "sunt1f": 25348937,
                        "cupidatat1a2": "tempor adipisicing",
                        "players": [
                            {
                                "userId": "351",
                                "name": "est Ut Lorem tempor enim",
                                "password": "consectetur Lorem officia pariatur dolor",
                                "rank": 81763184,
                                "countryCode": "sunt fugiat Lorem voluptate culpa"
                            },
                            {
                                "userId": "351",
                                "name": "ut cillum",
                                "password": "exercitation",
                                "rank": 9046686,
                                "countryCode": "aute ad",
                                "customProperties": {
                                    "8": "aute cillum dolore nisi deserunt",
                                    "Z": "nisi laborum"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "in fugiat quis eu",
                                "password": "irure cupidatat ut sunt velit",
                                "rank": -42048907,
                                "countryCode": "consectetur nostrud Ut in",
                                "customProperties": {
                                    "S": "magna ut",
                                    "g": "in ex"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "ad commodo aliquip in",
                                "password": "quis esse",
                                "rank": -73497343,
                                "countryCode": "sunt ut mollit consequat adipisicing",
                                "customProperties": {
                                    "2": "laboris ut id voluptate Excepteur",
                                    "6": "ex Excepteur incididunt",
                                    "v": "et ea laboris adipisicing dolor",
                                    "j": "occaecat esse dolor",
                                    "D": "labore Ut ex tempor"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "nostrud non in",
                                "password": "magna Excepteur",
                                "rank": 71094704,
                                "countryCode": "Ut magna ipsum",
                                "customProperties": {
                                    "5": "deserunt dolore ullamco",
                                    "Z": "proident dolor dolore consectetur culpa",
                                    "K": "anim dolore Excepteur dolor"
                                }
                            }
                        ],
                        "bots": [
                            {
                                "hostUserId": "et dolor laboris ut",
                                "name": "adipisicing Lorem ea",
                                "aiShortName": "in",
                                "aiVersion": "nostrud",
                                "aiOptions": {
                                    "m%LrM": "consequat culpa nisi voluptate reprehenderit",
                                    "!c7C%": "eiusmod aliquip occaecat"
                                }
                            },
                            {
                                "hostUserId": "tempor id ex",
                                "name": "qui fugiat deserunt laboris sint",
                                "aiShortName": "consectetur dolor",
                                "aiVersion": "laborum et",
                                "aiOptions": {
                                    "": "laboris nulla",
                                    "QUK~": "cupidatat aliquip deserunt incididunt eiusmod",
                                    "Ut": "pariatur",
                                    "_;(1;jaq": "consectetur labore"
                                }
                            },
                            {
                                "hostUserId": "laborum minim Excepteur officia",
                                "name": "proident nostrud enim ullamco consequat",
                                "aiShortName": "Duis sunt",
                                "aiVersion": "non laborum consequat",
                                "aiOptions": {
                                    "O8`xZm^j?J": "quis esse magna eiusmod ullamco",
                                    "/oP!": "ipsum"
                                }
                            },
                            {
                                "hostUserId": "ut minim et velit cillum",
                                "aiShortName": "esse dolore"
                            }
                        ],
                        "advantage": 41728853.596670866,
                        "incomeMultiplier": 30292522.90725708,
                        "faction": "laboris magna deserunt ex",
                        "color": {
                            "r": 0.7708589434623718,
                            "g": 0.9787599444389343,
                            "b": 0.40771234035491943
                        },
                        "startPos": {
                            "x": 78453732,
                            "y": 719857
                        },
                        "customProperties": {
                            "2": "cillum sed in"
                        }
                    },
                    {
                        "sint38e": -32484913,
                        "ut1": -37943852,
                        "nisi_2": 40031147.00317383,
                        "amet1": 82158851,
                        "aliquip_0_": "eu",
                        "in_2": "dolore proident labore voluptate",
                        "players": [
                            {
                                "userId": "351",
                                "name": "irure",
                                "password": "et sed nostrud sint anim",
                                "rank": 87354160,
                                "countryCode": "qui",
                                "customProperties": {
                                    "0": "Lorem quis deserunt ea amet",
                                    "A": "sunt ullamco dolor nisi adipisicing",
                                    "K": "esse ipsum labore et",
                                    "f": "reprehenderit aliquip"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "reprehenderit Excepteur minim elit",
                                "password": "fugiat ut nisi",
                                "rank": -65287555,
                                "countryCode": "anim laboris"
                            }
                        ],
                        "bots": [],
                        "faction": "culpa",
                        "customProperties": {
                            "r": "nisi irure",
                            "q": "commodo",
                            "g": "nulla in commodo minim culpa"
                        }
                    },
                    {
                        "players": [
                            {
                                "userId": "351",
                                "name": "labore",
                                "password": "aliquip eiusmod enim eu",
                                "rank": 86998046,
                                "countryCode": "in in minim",
                                "customProperties": {
                                    "8": "magna id labore",
                                    "F": "in",
                                    "b": "nostrud in",
                                    "L": "cupidatat minim dolor",
                                    "p": "sint",
                                    "y": "sunt"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "irure est aliquip occaecat",
                                "password": "nostrud consectetur Lorem",
                                "rank": 80332888,
                                "countryCode": "enim elit",
                                "customProperties": {
                                    "D": "irure minim ullamco",
                                    "_": "dolore sunt aute qui",
                                    "L": "ut Ut labore"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "magna",
                                "password": "non",
                                "countryCode": "tempor laboris Excepteur"
                            },
                            {
                                "userId": "351",
                                "name": "exercitation aliquip",
                                "password": "pariatur qui",
                                "rank": 69425679,
                                "countryCode": "dolore fugiat magna",
                                "customProperties": {
                                    "v": "velit sit quis esse Duis",
                                    "y": "Ut incididunt"
                                }
                            }
                        ],
                        "bots": [
                            {
                                "hostUserId": "ex sit Excepteur consequat",
                                "name": "ipsum in elit dolor",
                                "aiShortName": "laborum in",
                                "aiVersion": "voluptate"
                            },
                            {
                                "hostUserId": "velit Duis ex consectetur id",
                                "name": "veniam aliquip dolor ut voluptate",
                                "aiShortName": "anim exercitation Duis",
                                "aiOptions": {
                                    "N>9?S ": "aute labore",
                                    "F|{OiNzMa": "non sed labore"
                                }
                            }
                        ],
                        "advantage": 18509935.517802,
                        "incomeMultiplier": 74695497.75123596,
                        "faction": "sit ipsum in",
                        "color": {
                            "r": 0.7969751358032227,
                            "g": 0.9345782399177551,
                            "b": 0.9266147613525391
                        },
                        "startPos": {
                            "x": 39919460,
                            "y": -93218935
                        },
                        "customProperties": {
                            "c": "tempor",
                            "f": "tempor in",
                            "r": "labore"
                        }
                    }
                ],
                "startBox": {
                    "top": 0.28107714653015137,
                    "bottom": 0.7685254216194153,
                    "left": 0.6288118958473206,
                    "right": 0.8590249419212341
                },
                "allies": [
                    78389538,
                    11048806,
                    -1209486
                ],
                "customProperties": {
                    "I": "pariatur",
                    "w": "commodo",
                    "T": "nisi sunt laboris Duis dolor",
                    "d": "sed esse"
                }
            },
            {
                "teams": [
                    {
                        "enime_8": -45046056,
                        "anim_25_": 65835285.18676758,
                        "tempor_d89": "sunt deserunt Lorem pariatur",
                        "players": [
                            {
                                "userId": "351",
                                "name": "dolore",
                                "password": "pariatur in magna",
                                "rank": 61834610,
                                "countryCode": "minim proident cillum dolore",
                                "customProperties": {
                                    "p": "minim eiusmod cupidatat",
                                    "c": "reprehenderit do labore amet"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "ullamco ut reprehenderit esse nulla",
                                "password": "reprehenderit sint commodo ut",
                                "rank": 66087652,
                                "countryCode": "exercitation et",
                                "customProperties": {
                                    "0": "enim magna et",
                                    "W": "magna aliqua commodo",
                                    "K": "dolor Ut enim ut"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "dolor elit cupidatat culpa",
                                "password": "reprehenderit ipsum Lorem adipisicing deserunt",
                                "rank": 37372768,
                                "countryCode": "qui tempor",
                                "customProperties": {
                                    "2": "dolore ut dolor laboris in",
                                    "i": "id Excepteur culpa aute",
                                    "R": "magna anim id sint velit",
                                    "-": "irure amet consectetur deserunt"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "sed quis Excepteur",
                                "password": "ea aute Excepteur in esse",
                                "countryCode": "voluptate esse non",
                                "customProperties": {
                                    "9": "in occaecat nulla cillum",
                                    "z": "irure labore ea consectetur voluptate"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "quis ullamco exercitation dolore",
                                "password": "est",
                                "rank": -39389122,
                                "countryCode": "velit voluptate cillum quis commodo",
                                "customProperties": {
                                    "r": "qui dolor exercitation incididunt",
                                    "_": "consequat mollit enim"
                                }
                            }
                        ],
                        "bots": [
                            {
                                "hostUserId": "commodo",
                                "name": "ad velit aliqua",
                                "aiShortName": "fugiat",
                                "aiVersion": "magna esse",
                                "aiOptions": {
                                    "5q": "et mollit anim id Excepteur",
                                    "NE7h4*": "Lorem elit id",
                                    "+*": "Duis",
                                    "fgWUu": "ullamco"
                                }
                            }
                        ],
                        "incomeMultiplier": 50330251.45530701,
                        "startPos": {
                            "x": 21252453,
                            "y": -38358724
                        },
                        "customProperties": {
                            "3": "magna laborum",
                            "t": "anim magna",
                            "U": "esse sint aliqua labore",
                            "x": "reprehenderit in proident anim ullamco",
                            "o": "mollit fugiat aliqua ullamco",
                            "L": "Ut"
                        }
                    },
                    {
                        "Excepteur_06": 76332938,
                        "velit03f": 17054271.697998047,
                        "ipsumd4": 13666522,
                        "culpa_11": -22290515.899658203,
                        "laborum_5": true,
                        "players": [
                            {
                                "userId": "351",
                                "name": "sunt commodo",
                                "password": "tempor",
                                "rank": -43418074,
                                "countryCode": "deserunt et ex sunt esse",
                                "customProperties": {
                                    "9": "labore aliqua magna",
                                    "w": "Ut voluptate aliqua",
                                    "g": "eu ea culpa tempor commodo",
                                    "o": "sit",
                                    "T": "ipsum",
                                    "k": "eu veniam ad sit dolor"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "Ut",
                                "password": "in Ut tempor sed sint",
                                "rank": 97955394,
                                "countryCode": "in cupidatat id dolore aliqua",
                                "customProperties": {
                                    "j": "Duis aliqua"
                                }
                            },
                            {
                                "userId": "351",
                                "name": "aliqua nisi",
                                "password": "nulla incididunt"
                            },
                            {
                                "userId": "351",
                                "name": "ut officia sunt",
                                "password": "deserunt in culpa",
                                "rank": 82602585
                            }
                        ],
                        "faction": "velit magna adipisicing fugiat elit",
                        "startPos": {
                            "x": 30319691,
                            "y": 39152897
                        }
                    },
                    {
                        "dolor_81": "aliqua",
                        "cupidatatc_": -65298104.28619385,
                        "laboris15c": true,
                        "bots": [
                            {
                                "hostUserId": "cupidatat proident irure",
                                "name": "eiusmod",
                                "aiShortName": "cillum sed",
                                "aiVersion": "elit",
                                "aiOptions": {
                                    "d!QA >EHf*": "sed",
                                    "E_": "id",
                                    "%d4v-_IF": "Duis aute sit minim eiusmod"
                                }
                            },
                            {
                                "hostUserId": "deserunt sunt",
                                "name": "consequat non",
                                "aiShortName": "exercitation id",
                                "aiVersion": "esse",
                                "aiOptions": {
                                    "-G,bV/xg+k": "amet reprehenderit ea sed qui",
                                    "t*t^/FDlM": "anim cupidatat eu ad"
                                }
                            }
                        ],
                        "advantage": 97354686.23377025,
                        "incomeMultiplier": 97282755.37490845,
                        "faction": "nulla elit aliquip dolor laboris",
                        "color": {
                            "r": 0.19402176141738892,
                            "g": 0.04647409915924072,
                            "b": 0.0016859769821166992
                        },
                        "startPos": {
                            "x": 30237568,
                            "y": 94084394
                        },
                        "customProperties": {
                            "6": "id laborum veniam aliquip et",
                            "F": "Ut incididunt sunt"
                        }
                    },
                    {
                        "magna_b": -19572138.786315918,
                        "et__88": 58038759.23156738,
                        "qui_f": true,
                        "magna_87": -93291056.15615845,
                        "ipsum7e0": "Duis",
                        "ea__27": 73404645,
                        "etaf": true,
                        "advantage": 65392928.96949631
                    }
                ],
                "startBox": {
                    "top": 0.10845679044723511,
                    "bottom": 0.06546223163604736,
                    "left": 0.34359389543533325,
                    "right": 0.9827779531478882
                },
                "allies": [
                    -86199642,
                    -20416617,
                    74512136,
                    66814030,
                    -24815977
                ]
            },
            {
                "teams": [
                    {
                        "eub71": "fugiat officia ipsum consequat enim",
                        "quis1": 51666021.3470459,
                        "players": [],
                        "bots": [],
                        "advantage": 95466273.97771877,
                        "incomeMultiplier": 49550586.93885803,
                        "faction": "consequat cupidatat eu",
                        "color": {
                            "r": 0.030131816864013672,
                            "g": 0.4862546920776367,
                            "b": 0.8999290466308594
                        },
                        "startPos": {
                            "x": -37807942,
                            "y": -63565481
                        },
                        "customProperties": {
                            "2": "proident laboris",
                            "s": "consectetur sunt deserunt ea laborum",
                            "f": "Excepteur"
                        }
                    }
                ],
                "startBox": {
                    "top": 0.5118542313575745,
                    "bottom": 0.5133270621299744,
                    "left": 0.45150935649871826,
                    "right": 0.49201148748397827
                },
                "customProperties": {
                    "R": "nostrud",
                    "C": "consectetur ut",
                    "o": "deserunt veniam Ut amet"
                }
            },
            {
                "teams": [
                    {
                        "idb": false,
                        "magnaedd": -65702235.69869995,
                        "incf": -57787765,
                        "quis2c7": false,
                        "players": [],
                        "color": {
                            "r": 0.8442392349243164,
                            "g": 0.9555021524429321,
                            "b": 0.37365663051605225
                        }
                    },
                    {
                        "dolore_58f": "pariatur",
                        "proident7": "irure sed anim",
                        "Utad4": false,
                        "adipisicing_5fd": false,
                        "sunt_4": "exercitation ullamco Ut in enim",
                        "eiusmod_8c": 55503582.95440674,
                        "deserunt_c": 86534464,
                        "pariatur44": "dolore est sed",
                        "sit_807": -94358587.26501465,
                        "sint__d": 72782969
                    },
                    {
                        "players": [
                            {
                                "userId": "351",
                                "name": "Excepteur laboris id ut non",
                                "password": "consequat velit laborum",
                                "rank": -376725,
                                "countryCode": "aliquip sint ut",
                                "customProperties": {
                                    "7": "in quis cillum",
                                    "r": "occaecat pariatur minim tempor",
                                    "_": "qui velit aliquip",
                                    "Q": "laboris ipsum",
                                    "v": "reprehenderit"
                                }
                            }
                        ],
                        "incomeMultiplier": 19043487.310409546,
                        "color": {
                            "r": 0.10580366849899292,
                            "g": 0.0897781252861023,
                            "b": 0.4687536954879761
                        },
                        "customProperties": {
                            "3": "sint labore esse",
                            "7": "ea dolore nostrud"
                        }
                    },
                    {
                        "players": [
                            {
                                "userId": "351",
                                "name": "ad",
                                "password": "aliqua Ut non ipsum enim"
                            }
                        ],
                        "bots": [],
                        "advantage": 67751645.71938658,
                        "incomeMultiplier": 69966411.59057617,
                        "faction": "Lorem elit aute velit",
                        "color": {
                            "r": 0.5806702375411987,
                            "g": 0.07415169477462769,
                            "b": 0.8413802981376648
                        },
                        "startPos": {
                            "x": 94017101,
                            "y": 2833247
                        },
                        "customProperties": {
                            "7": "id",
                            "9": "amet pariatur",
                            "R": "aliquip",
                            "Y": "mollit voluptate",
                            "H": "ea sed dolore ut"
                        }
                    }
                ],
                "customProperties": {
                    "t": "dolore nostrud veniam laboris",
                    "W": "culpa reprehenderit ea eu Ut",
                    "b": "incididunt Ut pariatur eiusmod laborum"
                }
            }
        ],
        "spectators": [
            {
                "userId": {},
                "name": "fugiat nulla aliqua",
                "password": "id labore Duis sit non",
                "rank": -86037589,
                "countryCode": "dolore eiusmod reprehenderit"
            },
            {
                "userId": {},
                "name": "aliquip elit qui Duis officia",
                "password": "deserunt laboris"
            },
            {
                "userId": {},
                "name": "Ut Duis Excepteur cupidatat",
                "password": "irure mollit sit dolore",
                "rank": 16520166,
                "countryCode": "eiusmod ut"
            },
            {
                "userId": {},
                "name": "enim mollit anim adipisicing",
                "password": "elit irure"
            }
        ],
        "gameOptions": {
            "bJ&e@O_?": "exercitation",
            "*S=c^50nV": "commodo minim occaecat cupidatat mollit",
            "}R0-D2^'Lx": "fugiat magna aliquip et Lorem"
        },
        "restrictions": {
            "._": 24568861,
            "\\i&c.$%BR": 88750166,
            "U}edobl": 90776211,
            "nP7|.Nf": 21088242,
            "$7<9": 84207023
        },
        "luamsgRegexp": ".+?"
    }
}
```
</details>

#### TypeScript Definition
```ts
export type StartPosType = "fixed" | "random" | "ingame" | "beforegame";
export type UserId = string;

export interface AutohostStartRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/start";
    data: AutohostStartRequestData;
}
export interface AutohostStartRequestData {
    battleId: string;
    engineVersion: string;
    gameName: string;
    mapName: string;
    gameArchiveHash?: string;
    mapArchiveHash?: string;
    startDelay?: number;
    startPosType: StartPosType;
    allyTeams: [AllyTeam, ...AllyTeam[]];
    spectators?: Player[];
    mapOptions?: {
        [k: string]: string;
    };
    gameOptions?: {
        [k: string]: string;
    };
    restrictions?: {
        [k: string]: number;
    };
    luamsgRegexp?: string;
}
export interface AllyTeam {
    teams: [Team, ...Team[]];
    startBox?: StartBox;
    allies?: number[];
    customProperties?: CustomStartScriptProperties;
}
export interface Team {
    players?: Player[];
    bots?: Bot[];
    advantage?: number;
    incomeMultiplier?: number;
    faction?: string;
    color?: {
        r: number;
        g: number;
        b: number;
    };
    startPos?: {
        x: number;
        y: number;
    };
    customProperties?: CustomStartScriptProperties;
}
export interface Player {
    userId: UserId;
    name: string;
    password: string;
    rank?: number;
    countryCode?: string;
    customProperties?: CustomStartScriptProperties;
}
export interface CustomStartScriptProperties {
    [k: string]: string;
}
export interface Bot {
    hostUserId: string;
    name?: string;
    aiShortName: string;
    aiVersion?: string;
    aiOptions?: {
        [k: string]: string;
    };
    customProperties?: CustomStartScriptProperties;
}
export interface StartBox {
    top: number;
    bottom: number;
    left: number;
    right: number;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostStartResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostStartOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/start" },
                "status": { "const": "success" },
                "data": {
                    "title": "AutohostStartOkResponseData",
                    "type": "object",
                    "properties": {
                        "ips": {
                            "type": "array",
                            "items": {
                                "anyOf": [
                                    { "type": "string", "format": "ipv4" },
                                    { "type": "string", "format": "ipv6" }
                                ]
                            }
                        },
                        "port": {
                            "type": "integer",
                            "minimum": 1024,
                            "maximum": 65535
                        }
                    },
                    "required": ["ips", "port"]
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "AutohostStartFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/start" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "battle_already_exists",
                        "engine_version_not_available",
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "reprehenderit est",
    "commandId": "autohost/start",
    "status": "success",
    "data": {
        "ips": [
            "630b:441f:8318:e63b:bc82:5efb:fbe3:e844",
            "fd8e:c6fc:d9c5:810e:dd12:97e3:1fb3:c368",
            "cba7:24e4:8621:6409:7e73:d31f:aa2f:870a"
        ],
        "port": 38983
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostStartOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/start";
    status: "success";
    data: AutohostStartOkResponseData;
}
export interface AutohostStartOkResponseData {
    ips: string[];
    port: number;
}
```
Possible Failed Reasons: `battle_already_exists`, `engine_version_not_available`, `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Status

This event should be sent to the server on connection and whenever any of the status properties change.

- Endpoint Type: **Event**
- Source: **Autohost**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostStatusEvent",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/status" },
        "data": {
            "title": "AutohostStatusEventData",
            "type": "object",
            "properties": {
                "maxBattles": {
                    "description": "The maxBattles might be reported lower (e.g. 0) then currentBattles. Example: autohost is shutting down and doesn't want to accept any new battles.",
                    "type": "integer",
                    "minimum": 0
                },
                "currentBattles": { "type": "integer", "minimum": 0 },
                "availableEngines": {
                    "description": "List of available engine versions on autohost",
                    "type": "array",
                    "items": { "type": "string" }
                }
            },
            "required": ["maxBattles", "currentBattles", "availableEngines"],
            "examples": [
                {
                    "maxBattles": 10,
                    "currentBattles": 5,
                    "availableEngines": ["2025.01.5"]
                }
            ]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "nisi ipsum Duis fugiat sint",
    "commandId": "autohost/status",
    "data": {
        "maxBattles": 10,
        "currentBattles": 5,
        "availableEngines": [
            "2025.01.5"
        ]
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostStatusEvent {
    type: "event";
    messageId: string;
    commandId: "autohost/status";
    data: AutohostStatusEventData;
}
export interface AutohostStatusEventData {
    maxBattles: number;
    currentBattles: number;
    availableEngines: string[];
}
```
---

## SubscribeUpdates

Ask the autohost to send us updates about its battles. Autohost will send all updates with time > since (not >= but >)

- Endpoint Type: **Request** -> **Response**
- Source: **Server**
- Target: **Autohost**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSubscribeUpdatesRequest",
    "tachyon": {
        "source": "server",
        "target": "autohost",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/subscribeUpdates" },
        "data": {
            "title": "AutohostSubscribeUpdatesRequestData",
            "type": "object",
            "properties": { "since": { "$ref": "#/definitions/unixTime" } },
            "required": ["since"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "cupidatat aliquip",
    "commandId": "autohost/subscribeUpdates",
    "data": {
        "since": 1705432698000000
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UnixTime = number;

export interface AutohostSubscribeUpdatesRequest {
    type: "request";
    messageId: string;
    commandId: "autohost/subscribeUpdates";
    data: AutohostSubscribeUpdatesRequestData;
}
export interface AutohostSubscribeUpdatesRequestData {
    since: UnixTime;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostSubscribeUpdatesResponse",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "AutohostSubscribeUpdatesOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/subscribeUpdates" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "AutohostSubscribeUpdatesFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "autohost/subscribeUpdates" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "officia irure",
    "commandId": "autohost/subscribeUpdates",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface AutohostSubscribeUpdatesOkResponse {
    type: "response";
    messageId: string;
    commandId: "autohost/subscribeUpdates";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## Update

Inform the server of battle updates.

- Endpoint Type: **Event**
- Source: **Autohost**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Event

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "AutohostUpdateEvent",
    "tachyon": {
        "source": "autohost",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "event" },
        "messageId": { "type": "string" },
        "commandId": { "const": "autohost/update" },
        "data": {
            "title": "AutohostUpdateEventData",
            "type": "object",
            "properties": {
                "battleId": { "type": "string", "format": "uuid" },
                "time": { "$ref": "#/definitions/unixTime" },
                "update": {
                    "anyOf": [
                        {
                            "title": "StartUpdate",
                            "description": "The battle has started.",
                            "type": "object",
                            "properties": { "type": { "const": "start" } },
                            "required": ["type"]
                        },
                        {
                            "title": "FinishedUpdate",
                            "description": "The battle finished, generated once per every single player reporting who won.",
                            "type": "object",
                            "properties": {
                                "type": { "const": "finished" },
                                "userId": { "$ref": "#/definitions/userId" },
                                "winningAllyTeams": {
                                    "description": "Ally team IDs",
                                    "type": "array",
                                    "items": { "type": "integer" },
                                    "minItems": 1
                                }
                            },
                            "required": ["type", "userId", "winningAllyTeams"]
                        },
                        {
                            "title": "EngineMessageUpdate",
                            "description": "A message from the engine, e.g. some ip is trying to connect.",
                            "type": "object",
                            "properties": {
                                "type": { "const": "engine_message" },
                                "message": { "type": "string" }
                            },
                            "required": ["type", "message"]
                        },
                        {
                            "title": "EngineWarningUpdate",
                            "description": "A warning from the engine.",
                            "type": "object",
                            "properties": {
                                "type": { "const": "engine_warning" },
                                "message": { "type": "string" }
                            },
                            "required": ["type", "message"]
                        },
                        {
                            "title": "EngineQuitUpdate",
                            "description": "The engine process for battle has quit cleanly, no more updates will be sent for this battle.",
                            "type": "object",
                            "properties": {
                                "type": { "const": "engine_quit" }
                            },
                            "required": ["type"]
                        },
                        {
                            "title": "EngineCrashUpdate",
                            "description": "The engine process for battle has crashed, no more updates will be sent for this battle.",
                            "type": "object",
                            "properties": {
                                "type": { "const": "engine_crash" },
                                "details": {
                                    "description": "Optional, short, details of the crash.",
                                    "type": "string"
                                }
                            },
                            "required": ["type"]
                        },
                        {
                            "title": "PlayerJoinedUpdate",
                            "type": "object",
                            "properties": {
                                "type": { "const": "player_joined" },
                                "userId": { "$ref": "#/definitions/userId" },
                                "playerNumber": {
                                    "description": "Player number in the game, can be useful for custom commands",
                                    "type": "integer"
                                }
                            },
                            "required": ["type", "userId", "playerNumber"]
                        },
                        {
                            "title": "PlayerLeftUpdate",
                            "type": "object",
                            "properties": {
                                "type": { "const": "player_left" },
                                "userId": { "$ref": "#/definitions/userId" },
                                "reason": {
                                    "enum": [
                                        "lost_connection",
                                        "left",
                                        "kicked"
                                    ]
                                }
                            },
                            "required": ["type", "userId", "reason"]
                        },
                        {
                            "title": "PlayerChatUpdate",
                            "anyOf": [
                                {
                                    "type": "object",
                                    "properties": {
                                        "type": { "const": "player_chat" },
                                        "userId": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "message": { "type": "string" },
                                        "destination": {
                                            "enum": [
                                                "allies",
                                                "all",
                                                "spectators"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "type",
                                        "userId",
                                        "message",
                                        "destination"
                                    ]
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "type": { "const": "player_chat" },
                                        "userId": {
                                            "$ref": "#/definitions/userId"
                                        },
                                        "message": { "type": "string" },
                                        "destination": { "const": "player" },
                                        "toUserId": {
                                            "$ref": "#/definitions/userId"
                                        }
                                    },
                                    "required": [
                                        "type",
                                        "userId",
                                        "message",
                                        "destination",
                                        "toUserId"
                                    ]
                                }
                            ]
                        },
                        {
                            "title": "PlayerDefeatedUpdate",
                            "type": "object",
                            "properties": {
                                "type": { "const": "player_defeated" },
                                "userId": { "$ref": "#/definitions/userId" }
                            },
                            "required": ["type", "userId"]
                        },
                        {
                            "title": "LuaMsgUpdate",
                            "description": "This update is generated only for messages matching luamsgRegexp set in the battle start script.",
                            "type": "object",
                            "properties": {
                                "type": { "const": "luamsg" },
                                "userId": { "$ref": "#/definitions/userId" },
                                "script": { "enum": ["ui", "game", "rules"] },
                                "uiMode": {
                                    "description": "Set when script is 'ui'",
                                    "enum": ["all", "allies", "spectators"]
                                },
                                "data": {
                                    "type": "string",
                                    "contentEncoding": "base64",
                                    "contentMediaType": "application/octet-stream"
                                }
                            },
                            "required": ["type", "userId", "script", "data"]
                        }
                    ]
                }
            },
            "required": ["battleId", "time", "update"]
        }
    },
    "required": ["type", "messageId", "commandId", "data"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "event",
    "messageId": "voluptate nulla veniam",
    "commandId": "autohost/update",
    "data": {
        "battleId": "585472d0-6fc6-dd03-6c31-07c80e164f73",
        "time": 1705432698000000,
        "update": {
            "type": "engine_quit"
        }
    }
}
```
</details>

#### TypeScript Definition
```ts
export type UnixTime = number;
export type UserId = string;
export type PlayerChatUpdate =
    | {
          type: "player_chat";
          userId: UserId;
          message: string;
          destination: "allies" | "all" | "spectators";
      }
    | {
          type: "player_chat";
          userId: UserId;
          message: string;
          destination: "player";
          toUserId: UserId;
      };

export interface AutohostUpdateEvent {
    type: "event";
    messageId: string;
    commandId: "autohost/update";
    data: AutohostUpdateEventData;
}
export interface AutohostUpdateEventData {
    battleId: string;
    time: UnixTime;
    update:
        | StartUpdate
        | FinishedUpdate
        | EngineMessageUpdate
        | EngineWarningUpdate
        | EngineQuitUpdate
        | EngineCrashUpdate
        | PlayerJoinedUpdate
        | PlayerLeftUpdate
        | PlayerChatUpdate
        | PlayerDefeatedUpdate
        | LuaMsgUpdate;
}
export interface StartUpdate {
    type: "start";
}
export interface FinishedUpdate {
    type: "finished";
    userId: UserId;
    winningAllyTeams: [number, ...number[]];
}
export interface EngineMessageUpdate {
    type: "engine_message";
    message: string;
}
export interface EngineWarningUpdate {
    type: "engine_warning";
    message: string;
}
export interface EngineQuitUpdate {
    type: "engine_quit";
}
export interface EngineCrashUpdate {
    type: "engine_crash";
    details?: string;
}
export interface PlayerJoinedUpdate {
    type: "player_joined";
    userId: UserId;
    playerNumber: number;
}
export interface PlayerLeftUpdate {
    type: "player_left";
    userId: UserId;
    reason: "lost_connection" | "left" | "kicked";
}
export interface PlayerDefeatedUpdate {
    type: "player_defeated";
    userId: UserId;
}
export interface LuaMsgUpdate {
    type: "luamsg";
    userId: UserId;
    script: "ui" | "game" | "rules";
    uiMode?: "all" | "allies" | "spectators";
    data: string;
}
```
